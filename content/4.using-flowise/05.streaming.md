---
title: Потоковая передача (Streaming)
description:  Узнайте о работе потоковой передачи OSMI.
---

При настройке потоковой передачи для прогнозирования токены будут отправляться в виде событий, содержащих только данные, по мере их появления.
Использование библиотек Python/TS OSMI предоставляет две библиотеки:


* [Python](https://pypi.org/project/flowise/): `pip install flowise`
* [Typescript](https://www.npmjs.com/package/flowise-sdk): `npm install flowise-sdk`


```python
from flowise import Flowise, PredictionData

def test_streaming():
    client = Flowise()

    # Test streaming prediction
    completion = client.create_prediction(
        PredictionData(
            chatflowId="<flow-id>",
            question="Tell me a joke!",
            streaming=True
        )
    )

    # Process and print each streamed chunk
    print("Streaming response:")
    for chunk in completion:
        # {event: "token", data: "hello"}
        print(chunk)


if __name__ == "__main__":
    test_streaming()
```



```js
import { FlowiseClient } from 'flowise-sdk'

async function test_streaming() {
  const client = new FlowiseClient({ baseUrl: 'http://localhost:3000' });

  try {
    
    const prediction = await client.createPrediction({
      chatflowId: '<flow-id>',
      question: 'What is the capital of France?',
      streaming: true,
    });

    for await (const chunk of prediction) {
        
        console.log(chunk);
    }
    
  } catch (error) {
    console.error('Error:', error);
  }
}


test_streaming()
```

```bash
curl https://localhost:3000/api/v1/predictions/{flow-id} \
  -H "Content-Type: application/json" \
  -d '{
    "question": "Hello world!",
    "streaming": true
  }'
```

```html
event: token
data: Once upon a time...
```

Поток событий прогноза состоит из следующих типов событий:


| Тип события           | Описание                                                                                                                         |
| --------------- | ----------------------------------------------------------------------------------------------------------------------------------- |
| start           | Начало передачи потока streaming                                                                                                              |
| token           | Генерируется при выводе нового токена в потоке output                                                                           |
| error           | Генерируется, если при предсказании возникла ошибка error                                                                                        |
| end             | Генерируется по завершении предсказания finishes                                                                                                |
| metadata        | Вся метаданные, такие как chatId, messageId и связанные с потоком. Генерируется после того, как все токены были переданы и перед событием end |
| sourceDocuments | Генерируется, когда поток возвращает источники из векторного хранилища store                                                                             |
| usedTools       | Генерируется, когда поток использует инструменты tools                                                                                                    |

### Приложение Streamlit

[https://github.com/HenryHengZJ/flowise-streamlit](https://github.com/HenryHengZJ/flowise-streamlit)