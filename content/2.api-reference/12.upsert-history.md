---
title: Upsert History
description: 
---


## Получить все записи истории upsert

::field-group

::field{name="HTTP"}
 GET `/upsert-history/{id}`  
 Получить все записи истории обновлений с возможностью применения фильтров
::

::field{name="Авторизация" type="string" required}
 bearerAuth `JWT-токен`
::

::field{name="Параметры пути" }
`id` (string) — Chatflow ID (фильтрация по конкретному чат-флоу)  
::

::field{name="Query-параметры" }
`order` (enum) — порядок сортировки результатов  
По умолчанию: `ASC`  
Возможные значения: `ASC`, `DESC`  
`startDate` (string · date-time) — отфильтровать записи начиная с этой даты (включительно)  
`endDate` (string · date-time) — отфильтровать записи до этой даты (включительно)  
::

::

Коды ответов:

* 200 — успешная операция (application/json, массив объектов)
* 500 — внутренняя ошибка сервера


```json [Пример ответа]
[
  {
    "id": "cfd531e0-82fc-11e9-bc42-526af7764f64",
    "chatflowid": "7c4e8b7a-7b9a-4b4d-9f3e-2d28f1ebea02",
    "result": "{\"status\":\"success\",\"data\":{\"key\":\"value\"}}",
    "flowData": "{\"nodes\":[],\"edges\":[]}",
    "date": "2024-08-24T14:15:22Z"
  }
]
```


## Удалить записи истории upsert (soft delete)

::field-group
    ::field{name="HTTP"}
    PATCH `/upsert-history/{id}`  
    Мягкое удаление (soft delete) записей истории upsert по списку их идентификаторов.
    ::

    ::field{name="Авторизация" type="string" required}
    bearerAuth `JWT-токен`
    ::

    ::field{name="Тело запроса (application/json)"}
    `ids` (string · uuid[]) — список ID записей истории upsert для удаления
    ::

::

```HTTP
PATCH /upsert-history/{id} HTTP/1.1
Host: your-api-host
Authorization: Bearer JWT
Content-Type: application/json
Accept: */*
```

```json [Пример запроса]
{
  "ids": [
    "123e4567-e89b-12d3-a456-426614174000"
  ]
}
```
