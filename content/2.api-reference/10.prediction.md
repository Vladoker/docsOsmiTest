---
title: Prediction
description:
---


## Отправьте сообщение в поток и получите ответ от ИИ


::field-group
    ::field{name="HTTP"}
    POST   `/prediction/{id}`  
    Отправьте сообщение в ваш поток и получите ответ, сгенерированный ИИ. Это основной пункт для взаимодействия с вашими потоками и ассистентами. Аутентификация: может потребоваться API-ключ в зависимости от настроек потока.
    ::

    ::field{name="Авторизация" type="string" required}
    `bearerAuth` (JWT)
    ::
    
    ::field{name="Параметры пути:" type="string" required}
    `id` (string) — уникальный идентификатор флоу (Flow ID), напр.: `your-flow-id`
    ::

    ::field{name="Тело запроса (application/json):"}
    * `question` (string) — Вопрос/сообщение для отправки в поток  
     Пример: `"What is artificial intelligence?"`  

    * `form` (object) — объект формы, альтернативный question для Agentflow V2  
    Пример: `{"title":"Example","count":1}`

    * `streaming` (boolean) — Включить потоковые ответы для вывода в реальном времени  
    По умолчанию: `false`  


    * `overrideConfig` (object) — Переопределить конфигурацию потока и передать переменные при выполнении  
    Пример: `"sessionId":"user-session-123","temperature":0.7,"maxTokens":500,"vars":{"user_name":"Alice"}`  

    * `history` (object[]) — Предыдущие сообщения разговора для контекста  
    Пример: `[{"role":"apiMessage","content":"Hello!..."} , {"role":"userMessage","content":"Hi, my name is Sarah..."}]`  

    * `uploads` (object[]) — файлы для загрузки (изображения, аудио, документы и т. п.) в data URL / base64  
    Пример: `[{"type":"file","name":"example.png","data":"data:image/png;base64,...","mime":"image/png"}]`  

    * `humanInput` (object) — возврат на «чекпоинт», ожидавший человеческий ввод, и продолжение исполнения  
    Пример: `{"type":"reject","feedback":"Include more emoji"}`

    ::
::

Коды ответов:  
* 200 — успешный ответ предсказания (application/json)
* 400 — Bad Request: некорректный ввод или формат запроса (application/json)
* 401 — Unauthorized: неверный API-ключ (application/json)
* 404 — Not Found: чат-флоу с указанным ID не существует (application/json)
* 413 — Payload Too Large: размер запроса превышает лимиты (application/json)
* 422 — Validation Error: ошибка валидации запроса (application/json)
* 500 — Internal Server Error: ошибка конфигурации/исполнения флоу (application/json)

```HTTP
POST /prediction/{id} HTTP/1.1
Host: your-api-host
Authorization: Bearer JWT
Content-Type: application/json
Accept: */*
Content-Length: 628
```

```json [Пример HTTP-запроса]
{
  "question": "What is artificial intelligence?",
  "form": {
    "title": "Example",
    "count": 1
  },
  "streaming": false,
  "overrideConfig": {
    "sessionId": "user-session-123",
    "temperature": 0.7,
    "maxTokens": 500,
    "vars": {
      "user_name": "Alice"
    }
  },
  "history": [
    {
      "role": "apiMessage",
      "content": "Hello! I'm an AI assistant. How can I help you today?"
    },
    {
      "role": "userMessage",
      "content": "Hi, my name is Sarah and I'm learning about AI"
    }
  ],
  "uploads": [
    {
      "type": "file",
      "name": "example.png",
      "data": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAABjElEQVRIS+2Vv0oDQRDG",
      "mime": "image/png"
    }
  ],
  "humanInput": {
    "type": "reject",
    "feedback": "Include more emoji"
  }
}

```

```json [Пример успешного ответа (200)]
{
  "text": "Artificial intelligence (AI) is a branch of computer science that focuses on creating systems capable of performing tasks that typically require human intelligence.",
  "json": {},
  "question": "What is artificial intelligence?",
  "chatId": "chat-12345",
  "chatMessageId": "msg-67890",
  "sessionId": "user-session-123",
  "memoryType": "Buffer Memory",
  "sourceDocuments": [
    {
      "pageContent": "This is the content of the page.",
      "metadata": {
        "author": "John Doe",
        "date": "2024-08-24"
      }
    }
  ],
  "usedTools": [
    {
      "tool": "Name of the tool",
      "toolInput": {
        "input": "search query"
      },
      "toolOutput": "text"
    }
  ]
}
```


