---
title: Vector Upsert
description:
---


## Обновление или добавление векторов (векторных эмбеддингов)

::field-group

::field{name="HTTP"}
 POST `/vector/upsert/{id}`  
 Выполняет upsert (вставку/обновление) векторных эмбеддингов документов в рамках указанного чат-флоу.
::

::field{name="Авторизация" type="string" required}
 bearerAuth `JWT-токен`
::

::field{name="Тело запроса (application/json):"}
* `stopNodeId` (string) — если используется несколько узлов векторного хранилища, укажите ID узла, в который сохранять векторы  
 Пример: `"node_1"`
* `overrideConfig` (object, optional) — конфигурация для переопределения настроек upsert по умолчанию
::

::


Коды ответов:

* 200 — векторные эмбеддинги успешно вставлены/обновлены (application/json)
* 400 — некорректные входные данные
* 404 — чат-флоу не найден
* 422 — ошибка валидации
* 500 — внутренняя ошибка сервера


```HTTP
POST /vector/upsert/{id} HTTP/1.1
Host: your-api-host
Authorization: Bearer JWT
Content-Type: application/json
Accept: */*
```

```json [Пример HTTP-запроса]
{
  "stopNodeId": "node_1",
  "overrideConfig": {}
}
```

```json [Пример успешного ответа (200)]
{
  "numAdded": 1,
  "numDeleted": 1,
  "numUpdated": 1,
  "numSkipped": 1,
  "addedDocs": [
    {
      "pageContent": "This is the content of the page.",
      "metadata": {
        "author": "John Doe",
        "date": "2024-08-24"
      }
    }
  ]
}
```
