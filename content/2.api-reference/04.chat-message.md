---
title: Chat Message
description:
---


## Получить список сообщений

::field-group

    ::field{name="HTTP"}
    GET  `/chatmessage/{id}`  
    Возвращает все сообщения для конкретного чат-флоу.
    ::

    ::field{name="Авторизация" type="string" required}
    bearerAuth `JWT-токен`
    ::

    ::field{name="Параметры пути" type="string" required}
    `id` (string) — ID чат-флоу  
    ::

    ::field{name="Query-параметры"}
    `chatType` (enum) — фильтр по типу чата  
    Возможные значения: `INTERNAL`, `EXTERNAL`  
    `order` (enum) — порядок сортировки  
    Возможные значения: `ASC`, `DESC`  
    `chatId` (string) — фильтр по ID чата  
    `memoryType` (string) — фильтр по типу памяти (например, `Buffer Memory`)  
    `sessionId` (string) — фильтр по ID сессии  
    `startDate` (date-time) — фильтр по дате начала  
    `endDate` (date-time) — фильтр по дате окончания  
    `feedback` (boolean) — фильтр по наличию фидбэка  
    `feedbackType` (enum) — фильтр по типу фидбэка (используется, если feedback = true)  
    Возможные значения: `THUMBS_UP`, `THUMBS_DOWN`
    ::
::


```HTTP [Пример запроса]
GET /chatmessage/{id} HTTP/1.1
Host: your-api-host
Authorization: Bearer JWT
Accept: */*
```


```js [Успешный ответ (200)]
[
  {
    "id": "d290f1ee-6c54-4b01-90e6-d701748f0851",
    "role": "apiMessage",
    "chatflowid": "d290f1ee-6c54-4b01-90e6-d701748f0852",
    "content": "Hello, how can I help you today?",
    "sourceDocuments": [
      {
        "pageContent": "This is the content of the page.",
        "metadata": {
          "author": "John Doe",
          "date": "2024-08-24"
        }
      }
    ],
    "usedTools": [
      {
        "tool": "Name of the tool",
        "toolInput": { "input": "search query" },
        "toolOutput": "text"
      }
    ],
    "fileAnnotations": [
      { "filePath": "path/to/file", "fileName": "file.txt" }
    ],
    "agentReasoning": [
      {
        "agentName": "agent",
        "messages": ["hello"],
        "nodeName": "seqAgent",
        "nodeId": "seqAgent_0",
        "usedTools": [
          {
            "tool": "Name of the tool",
            "toolInput": { "input": "search query" },
            "toolOutput": "text"
          }
        ],
        "sourceDocuments": [
          {
            "pageContent": "This is the content of the page.",
            "metadata": { "author": "John Doe", "date": "2024-08-24" }
          }
        ],
        "state": { "ANY_ADDITIONAL_PROPERTY": "text" }
      }
    ],
    "fileUploads": [
      {
        "data": "data:image/png;base64,...",
        "type": "image",
        "name": "image.png",
        "mime": "image/png"
      }
    ],
    "action": [
      {
        "id": "61beeb58-6ebe-4d51-aa0b-41d4c546ff08",
        "mapping": { "approve": "Yes", "reject": "No", "toolCalls": [] },
        "elements": []
      }
    ],
    "chatType": "INTERNAL",
    "chatId": "chat12345",
    "memoryType": "text",
    "sessionId": "text",
    "createdDate": "2024-08-24T14:15:22Z",
    "leadEmail": "user@example.com"
  }
]

```

Ошибки:  

* 500 —  внутренняя ошибка сервера


## Удаление сообщений


::field-group

    ::field{name="HTTP"}
    DELETE  `/chatmessage/{id}`  
    Удаляет все сообщения для конкретного чат-флоу.
    ::

    ::field{name="Авторизация" type="string" required}
    bearerAuth `JWT-токен`
    ::

    ::field{name="Параметры пути" type="string" required}
    `id` (string) — ID чат-флоу  
    ::

    ::field{name="Query-параметры"}
    `chatId` (string) — фильтр по ID чат  
    `memoryType` (string) — фильтр по типу памяти (например, `Buffer Memory`)  
    `sessionId` (string) — фильтр по ID сессии  
    `chatType` (enum) — фильтр по типу чата (`INTERNAL`, `EXTERNAL`)  
    `startDate` (date-time) — фильтр по дате начала  
    `endDate` (date-time) — фильтр по дате окончания  
    `feedbackType` (enum) — фильтр по типу фидбэка (`THUMBS_UP`, `THUMBS_DOWN`)  
    `hardDelete` (boolean) — если `true`, то сообщения удаляются также у сторонних сервисов
    ::
::

```HTTP [Пример запроса]
DELETE /chatmessage/{id} HTTP/1.1
Host: your-api-host
Authorization: Bearer JWT
Accept: */*
```

Коды ответов:

* 200 — сообщения успешно удалены (ответ без содержимого)
* 400 — некорректные параметры
* 404 — сообщения не найдены
* 500 — внутренняя ошибка сервера
